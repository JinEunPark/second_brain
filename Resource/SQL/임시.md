

https://school.programmers.co.kr/learn/courses/30/lessons/59412

```sql
select extract(hour from o.datetime) as hour, count(animal_id) as count
from animal_outs o
where extract(hour from o.datetime) between 9 and 19
group by extract(hour from o.datetime)
order by hour asc;
```





https://school.programmers.co.kr/learn/courses/30/lessons/59413

SQL문을 실행하면 다음과 같이 나와야 합니다.

| HOUR | COUNT |
| ---- | ---- |
| 0 | 0 |
| 1 | 0 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |
| 5 | 0 |
| 6 | 0 |
| 7 | 3 |
| 8 | 1 |
| 9 | 1 |
| 10 | 2 |
| 11 | 13 |
| 12 | 10 |
| 13 | 14 |
| 14 | 9 |
| 15 | 7 |
| 16 | 10 |
| 17 | 12 |
| 18 | 16 |
| 19 | 2 |
| 20 | 0 |
| 21 | 0 |
| 22 | 0 |
| 23 | 0 |
위의 표를 만드는 것이 어려웠다... 왜냐하면 해당 테이블에 존재하지 않는 시간대가 있기 때문인데 이를 해결하기 위해서는 sql 에서 변수를 만드는 문법을 알아야해서 간단하게 정리해본다
일단 시작하기에 앞서서  mysql 에는 두가지 변수가 존재하는데 하나는 사용자 정의 변수이고 다른 하나는 지역변수이다 
1. 사용자 정의 변수
	1.  변수는 세션(Session)단위로 실행이 되기 때문에, 한 클라이언트에서 정의한 사용자 변수는 다른 클라이언트에서 보거나 사용할 수 없다.
	2. 사용자 정의 변수 선언 및 초기화
		~~~sql
		set @time := -1 or set @time = -1
		~~~
		위의 예시처럼 변수를 선언하는 것이 가능한데 두가지를 사용할 수 있다 기본적으로 
		1. set 키워드와 함께 선언하고 초기화하는 경우 '='  ':=' 두가지를 모두 사용할 수 있다
		2. set 키워드 이외의 공간에서 선언하고 사용하는 경우 ':=' 반드시 이 키워드를 사용해야한다.
	~~~sql
	set @time = -1;
select 
    (@time := @time +1) as hour, 
    (select count(animal_id) 
    from animal_outs o
    where @time = extract(hour from o.datetime))
    as count
from 
    animal_outs
where @time < 23
	~~~ 

사용예시

2. 지역변수
	1. 지역변수 선언 및 초기화
		~~~sql
	delimiter $$
	    create procedure testpro(in v1 int)
	    begin
	        declare start int default 1;
	    end $$
	delimiter;
	call testpro(1)
		~~~
	
	위의 코드에서 declare 변수이름 자료형 문볍을 지키며 선언했다. 함고로 위의 default 키워드를 사용하지 않으면 초기값은 null 이다. 그러면 지역변수를 다시 할당할 때는? SET @Age = 10;


https://school.programmers.co.kr/learn/courses/30/lessons/131530

```sql
select (TRUNCATE(price / 10000,0) * 10000) as price_group , 
        count(product_id) as products
from product
group by TRUNCATE(price / 10000,0)
order by price_group asc;
```

​

mysql에서 정수와 정수를 /로 나누면 소수점 이하까지 같이 나온다.

```
SELECT 5/3;
1.66667
```

정수만 얻고 싶으면 TRUNCATE나 FLOOR 함수로 소수점을 버려줘야한다.

```
SELECT TRUNCATE(5/3, 0); SELECT FLOOR(5/3);
1

```

**DIV 함수**

**DIV** 함수를 사용하면 FLOOR를 안써도 결과 값을 정수로 얻을 수 있다.!!
```
SELECT 5 DIV 3;
1
```

**[출처]** [[mysql] 정수 나누기 정수 값을 정수로](https://blog.naver.com/rorean/221571860580)|**작성자** [may](https://blog.naver.com/rorean)

그렇다면 올림은 ? ceil()